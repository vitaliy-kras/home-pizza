{"version":3,"file":"static/js/822.6021a3a8.chunk.js","mappings":"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","sources":["components/ui/PayButton.tsx","webpack://start-pizza/./src/pages/Payment/Payment.module.scss?095a","pages/Payment/Payment.tsx","pages/Payment/usePaymentService.ts","pages/Payment/cardInputsUtils.tsx"],"sourcesContent":["import { FC } from 'react'\r\nimport { BiError } from 'react-icons/bi'\r\nimport { CgSandClock } from 'react-icons/cg'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { clearItems } from '../../redux/cart/cartSlice'\r\n\r\ntype TypeButtonProps = {\r\n\tprocess: string\r\n}\r\n\r\nconst PayButton: FC<TypeButtonProps> = ({ process }) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst navigate = useNavigate()\r\n\r\n\tif (process === 'success') {\r\n\t\tdispatch(clearItems())\r\n\t\tnavigate('/payment/successful')\r\n\t}\r\n\r\n\treturn (\r\n\t\t\t<button className='button pay-btn'>\r\n\t\t\t\t{process === 'loading' && <CgSandClock />}\r\n\t\t\t\t{process === 'error' && <BiError />}\r\n\t\t\t\t<span>ОПЛАТИТИ</span>\r\n\t\t\t</button>\r\n\r\n\t)\r\n}\r\n\r\nexport default PayButton\r\n","// extracted by mini-css-extract-plugin\nexport default {\"payment_container\":\"Payment_payment_container__Mu3A5\",\"payment__top\":\"Payment_payment__top__CpM9F\",\"payment__form\":\"Payment_payment__form__kdrR9\",\"inputs_wrapper\":\"Payment_inputs_wrapper__ybbBw\",\"personal_info\":\"Payment_personal_info__eqQL+\",\"field\":\"Payment_field__k9X8V\",\"errors\":\"Payment_errors__VxqsV\",\"card_info\":\"Payment_card_info__bu16N\",\"field_card\":\"Payment_field_card__555Ua\",\"field_card_term\":\"Payment_field_card_term__M26EX\",\"errors_card_number\":\"Payment_errors_card_number__M6hkZ\",\"errors_term\":\"Payment_errors_term__M1WPI\",\"field_card_back\":\"Payment_field_card_back__TJceG\",\"errors_card_password\":\"Payment_errors_card_password__S8kai\",\"submit_error\":\"Payment_submit_error__C4suo\"};","import { FC, useEffect, useState } from 'react'\r\nimport { Controller, SubmitHandler, useForm } from 'react-hook-form'\r\nimport { GrMoney } from 'react-icons/gr'\r\nimport PhoneInput from 'react-phone-input-2'\r\nimport { useSelector } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport PayButton from '../../components/ui/PayButton'\r\nimport { selectCart } from '../../redux/cart/selectors'\r\nimport styles from './Payment.module.scss'\r\nimport { cardNumberCorrection, cardTermCorrection } from './cardInputsUtils'\r\nimport { IPaymentInputs } from './payment.interface'\r\nimport { useSendOrderService } from './usePaymentService'\r\n\r\nconst Payment: FC = () => {\r\n\tconst { totalPrice, items } = useSelector(selectCart)\r\n\tconst navigate = useNavigate()\r\n\tconst [inputType, setInputType] = useState<string>('')\r\n\r\n\tconst { sendOrder, process, setProcess } = useSendOrderService()\r\n\r\n\tconst {\r\n\t\tregister,\r\n\t\thandleSubmit,\r\n\t\twatch,\r\n\t\tcontrol,\r\n\t\tformState: { errors }\r\n\t} = useForm<IPaymentInputs>({\r\n\t\tmode: 'onChange'\r\n\t})\r\n\r\n\tconst submit: SubmitHandler<IPaymentInputs> = data => {\r\n\t\tsetProcess('waiting')\r\n\t\tsendOrder({ paymentInfo: data, orderedPizza: items })\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (items.length === 0) {\r\n\t\t\tnavigate('/')\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst watchName = watch('name')\r\n\tconst watchAddress = watch('address')\r\n\tconst watchPassword = watch('password')\r\n\tconst watchTerm = watch('term')\r\n\tconst watchCardNumber = watch('cardNumber')\r\n\r\n\treturn (\r\n\t\t<div className={styles.payment_container}>\r\n\t\t\t<div className={styles.payment__top}>\r\n\t\t\t\t<h2>\r\n\t\t\t\t\t<GrMoney />\r\n\t\t\t\t\tСума вашого замовлення:<span> {totalPrice}</span> грн\r\n\t\t\t\t</h2>\r\n\t\t\t\t<div>Введіть необхідні дані для оформлення </div>\r\n\t\t\t</div>\r\n\t\t\t<form onSubmit={handleSubmit(submit)} className={styles.payment__form}>\r\n\t\t\t\t<div className={styles.inputs_wrapper}>\r\n\t\t\t\t\t<section className={styles.personal_info}>\r\n\t\t\t\t\t\t<div className={styles.field}>\r\n\t\t\t\t\t\t\t<label>Ім'я:</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tplaceholder='Як Вас звати...?'\r\n\t\t\t\t\t\t\t\tvalue={watchName || ''}\r\n\t\t\t\t\t\t\t\t{...register('name', {\r\n\t\t\t\t\t\t\t\t\trequired: \"*Обов'язкове поле\",\r\n\t\t\t\t\t\t\t\t\tminLength: {\r\n\t\t\t\t\t\t\t\t\t\tvalue: 3,\r\n\t\t\t\t\t\t\t\t\t\tmessage: '*Введіть не менше 3 символів'\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsetValueAs: value => value.slice(0, 30)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{errors?.name && (\r\n\t\t\t\t\t\t\t\t<div className={styles.errors}>{errors.name?.message}</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={styles.field}>\r\n\t\t\t\t\t\t\t<label>Телефон:</label>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname='phone'\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\t\t\trequired: \"*Обов'язкове поле\",\r\n\t\t\t\t\t\t\t\t\tminLength: {\r\n\t\t\t\t\t\t\t\t\t\tvalue: 12,\r\n\t\t\t\t\t\t\t\t\t\tmessage: '*Введіть номер повністю '\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\trender={({ field: { onChange, value } }) => (\r\n\t\t\t\t\t\t\t\t\t<PhoneInput\r\n\t\t\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\t\t\tcountry='ua'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='+380 (97) 123 45 67'\r\n\t\t\t\t\t\t\t\t\t\tspecialLabel=''\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{errors?.phone && (\r\n\t\t\t\t\t\t\t\t<div className={styles.errors}>{errors.phone?.message}</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={styles.field}>\r\n\t\t\t\t\t\t\t<label>Адреса:</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tplaceholder='Куди доставити замовлення...?'\r\n\t\t\t\t\t\t\t\tvalue={watchAddress || ''}\r\n\t\t\t\t\t\t\t\t{...register('address', {\r\n\t\t\t\t\t\t\t\t\trequired: \"*Обов'язкове поле\",\r\n\t\t\t\t\t\t\t\t\tminLength: {\r\n\t\t\t\t\t\t\t\t\t\tvalue: 10,\r\n\t\t\t\t\t\t\t\t\t\tmessage: '*Введіть не менше 10 символів'\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsetValueAs: value => value.slice(0, 30)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{errors?.address && (\r\n\t\t\t\t\t\t\t\t<div className={styles.errors}>{errors.address?.message}</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t\t<section className={styles.card_info}>\r\n\t\t\t\t\t\t<label>Банківська картка:</label>\r\n\t\t\t\t\t\t<div className={styles.field_card}>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tvalue={watchCardNumber || ''}\r\n\t\t\t\t\t\t\t\tautoComplete='off'\r\n\t\t\t\t\t\t\t\tplaceholder='Номер картки'\r\n\t\t\t\t\t\t\t\t{...register('cardNumber', {\r\n\t\t\t\t\t\t\t\t\trequired: \"*Обов'язкове поле\",\r\n\t\t\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\t\t\tvalue: /^(\\d{4} ){3}\\d{4}$/i,\r\n\t\t\t\t\t\t\t\t\t\tmessage: '*Введіть валідний номер'\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tonChange: e => setInputType(e.nativeEvent.inputType),\r\n\t\t\t\t\t\t\t\t\tsetValueAs: value => cardNumberCorrection(value, inputType)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{errors?.cardNumber && (\r\n\t\t\t\t\t\t\t\t<div className={styles.errors_card_number}>\r\n\t\t\t\t\t\t\t\t\t{errors.cardNumber?.message}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName={styles.field_card_term}\r\n\t\t\t\t\t\t\t\tplaceholder='термін'\r\n\t\t\t\t\t\t\t\tautoComplete='off'\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tvalue={watchTerm || ''}\r\n\t\t\t\t\t\t\t\t{...register('term', {\r\n\t\t\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\t\t\tvalue: /^(0[1-9]|1[0-2])\\/[2][3-9]$/, \r\n\t\t\t\t\t\t\t\t\t\tmessage: '*Введіть правильну дату'\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\trequired: \"*Обов'язкове поле\",\r\n\t\t\t\t\t\t\t\t\tonChange: e => setInputType(e.nativeEvent.inputType),\r\n\t\t\t\t\t\t\t\t\tsetValueAs: value => cardTermCorrection(value, inputType)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{errors?.term && (\r\n\t\t\t\t\t\t\t\t<div className={styles.errors_term}>{errors.term?.message}</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={styles.field_card_back}>\r\n\t\t\t\t\t\t\t<p> </p>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tplaceholder='cvv'\r\n\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\tvalue={watchPassword || ''}\r\n\t\t\t\t\t\t\t\t{...register('password', {\r\n\t\t\t\t\t\t\t\t\trequired: \"*Обов'язкове поле\",\r\n\t\t\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\t\t\tvalue: /^(\\d{3})$/i,\r\n\t\t\t\t\t\t\t\t\t\tmessage: '*Введіть валідний cvv'\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tminLength: {\r\n\t\t\t\t\t\t\t\t\t\tvalue: 3,\r\n\t\t\t\t\t\t\t\t\t\tmessage: '*Введіть 3 цифри'\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsetValueAs: value => value.slice(0, 3)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{errors?.password && (\r\n\t\t\t\t\t\t\t\t<div className={styles.errors_card_password}>\r\n\t\t\t\t\t\t\t\t\t{errors.password?.message}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</div>\r\n\t\t\t\t<PayButton process={process} />\r\n\t\t\t</form>\r\n\t\t\t{process === 'error' && (\r\n\t\t\t\t<p className={styles.submit_error}>\r\n\t\t\t\t\tПри обробці замовлення виникла помилка! Перевірте з'єднання та\r\n\t\t\t\t\tспробуйте ще!\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Payment\r\n","import { useCallback, useState } from \"react\"\r\nimport { axiosInstance } from \"../../api\"\r\nimport { IOrder } from \"./payment.interface\"\r\n\r\n\r\n\r\nexport const useSendOrderService = () => {\r\n\r\n\tconst [process, setProcess] = useState(\"waiting\")\r\n\r\n\t\tconst sendOrder =  useCallback(async (order: IOrder) => {\r\n\t\t\tsetProcess(\"loading\")\r\n\t\t\ttry {\r\n\t\t\t\t await axiosInstance.post(`orders`, order)\r\n\t\t\t\tsetProcess(\"success\")       \r\n\t\t\t} catch (error) {\r\n\t\t\t\tsetProcess(\"error\")\r\n\t\t\t\tthrow error\r\n\t\t\t}\r\n\t\t}, [])\r\n\r\n\r\n  return {sendOrder, process, setProcess}\r\n}","export const cardTermCorrection = (value: string, inputType: string) => {\r\n\tvalue = value.slice(0, 5)\r\n\tif (inputType === 'deleteContentBackward') {\r\n\t\treturn value\r\n\t} else if (value.match(/^[0-9/]+$/) === null) {\r\n\t\tvalue = ''\r\n\t} else if (value.match(/^\\d{2}$/) !== null) {\r\n\t\tvalue = value + '/'\r\n\t}\r\n\treturn value\r\n}\r\n\r\nexport const cardNumberCorrection = (value: string, inputType: string) => {\r\n\tvalue = value.slice(0, 19)\r\n\tif (value.match(/^[0-9 ]+$/) === null) {\r\n\t\tvalue = ''\r\n\t} else\tif (value.match(/[\\s{2}]+$/) !== null) {\r\n\t\tvalue = ''\r\n\t}\r\n\tif (inputType === 'deleteContentBackward') {\r\n\t\treturn value\r\n\t}\r\n\tif (value.match(/^\\d{4}$/) !== null) {\r\n\t\tvalue = value + ' '\r\n\t} else if (value.match(/^\\d{4}\\s\\d{4}$/) !== null) {\r\n\t\tvalue = value + ' '\r\n\t} else if (value.match(/^\\d{4}\\s\\d{4}\\s\\d{4}$/) !== null) {\r\n\t\tvalue = value + ' '\r\n\t}\r\n\treturn value\r\n}\r\n"],"names":["_ref","process","dispatch","useDispatch","navigate","useNavigate","clearItems","_jsxs","className","children","_jsx","CgSandClock","BiError","_errors$name","_errors$phone","_errors$address","_errors$cardNumber","_errors$term","_errors$password","_useSelector","useSelector","selectCart","totalPrice","items","_useState","useState","_useState2","_slicedToArray","inputType","setInputType","_useSendOrderService","setProcess","sendOrder","useCallback","_asyncToGenerator","_regeneratorRuntime","mark","_callee","order","wrap","_context","prev","next","axiosInstance","post","t0","stop","_x","apply","arguments","useSendOrderService","_useForm","useForm","mode","register","handleSubmit","watch","control","errors","formState","useEffect","length","watchName","watchAddress","watchPassword","watchTerm","watchCardNumber","styles","GrMoney","onSubmit","data","paymentInfo","orderedPizza","_objectSpread","placeholder","value","required","minLength","message","setValueAs","slice","name","Controller","rules","render","_ref$field","field","onChange","PhoneInput","country","specialLabel","phone","address","autoComplete","pattern","e","nativeEvent","match","cardNumberCorrection","cardNumber","type","cardTermCorrection","term","password","PayButton"],"sourceRoot":""}