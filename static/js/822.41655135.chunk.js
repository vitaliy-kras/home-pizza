"use strict";(self.webpackChunkstart_pizza=self.webpackChunkstart_pizza||[]).push([[822],{6822:function(e,s,n){n.r(s),n.d(s,{default:function(){return L}});var r=n(1413),a=n(9439),t=n(2791),l=n(887),i=n(6053),c=n(5737),d=n.n(c),u=n(9434),o=n(7689),m=n(7692),v=n(5880),_=n(9656),h=n(184),p=function(e){var s=e.process,n=(0,u.I0)(),r=(0,o.s0)();return"success"===s&&(n((0,_.H5)()),r("/payment/successful")),(0,h.jsxs)("button",{className:"button pay-btn",children:["loading"===s&&(0,h.jsx)(v.JOT,{}),"error"===s&&(0,h.jsx)(m.I2T,{}),(0,h.jsx)("span",{children:"\u041e\u041f\u041b\u0410\u0422\u0418\u0422\u0418"})]})},x=n(4421),f="Payment_payment_container__Mu3A5",j="Payment_payment__top__CpM9F",y="Payment_payment__form__kdrR9",b="Payment_inputs_wrapper__ybbBw",g="Payment_personal_info__eqQL+",N="Payment_field__k9X8V",P="Payment_errors__VxqsV",w="Payment_card_info__bu16N",k="Payment_field_card__555Ua",C="Payment_field_card_term__M26EX",Z="Payment_errors_card_number__M6hkZ",$="Payment_errors_term__M1WPI",q="Payment_field_card_back__TJceG",V="Payment_errors_card_password__S8kai",z="Payment_submit_error__C4suo",A=n(4165),S=n(5861),I=n(8131),L=function(){var e,s,n,c,m,v,_=(0,u.v9)(x.K),L=_.totalPrice,M=_.items,T=(0,o.s0)(),E=(0,t.useState)(""),B=(0,a.Z)(E,2),O=B[0],H=B[1],J=function(){var e=(0,t.useState)("waiting"),s=(0,a.Z)(e,2),n=s[0],r=s[1],l=(0,t.useCallback)(function(){var e=(0,S.Z)((0,A.Z)().mark((function e(s){return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("loading"),e.prev=1,e.next=4,I.b.post("orders",s);case 4:r("success"),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),r("error"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(s){return e.apply(this,arguments)}}(),[]);return{sendOrder:l,process:n,setProcess:r}}(),Q=J.sendOrder,R=J.process,X=J.setProcess,F=(0,l.cI)({mode:"onChange"}),G=F.register,K=F.handleSubmit,U=F.watch,W=F.control,D=F.formState.errors;(0,t.useEffect)((function(){0===M.length&&T("/")}),[]);var Y=U("name"),ee=U("address"),se=U("password"),ne=U("term"),re=U("cardNumber");return(0,h.jsxs)("div",{className:f,children:[(0,h.jsxs)("div",{className:j,children:[(0,h.jsxs)("h2",{children:[(0,h.jsx)(i.R_H,{}),"\u0421\u0443\u043c\u0430 \u0432\u0430\u0448\u043e\u0433\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f:",(0,h.jsxs)("span",{children:[" ",L]})," \u0433\u0440\u043d"]}),(0,h.jsx)("div",{children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u0456\u0434\u043d\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044f "})]}),(0,h.jsxs)("form",{onSubmit:K((function(e){X("waiting"),Q({paymentInfo:e,orderedPizza:M})})),className:y,children:[(0,h.jsxs)("div",{className:b,children:[(0,h.jsxs)("section",{className:g,children:[(0,h.jsxs)("div",{className:N,children:[(0,h.jsx)("label",{children:"\u0406\u043c'\u044f:"}),(0,h.jsx)("input",(0,r.Z)({placeholder:"\u042f\u043a \u0412\u0430\u0441 \u0437\u0432\u0430\u0442\u0438...?",value:Y||""},G("name",{required:"*\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435",minLength:{value:3,message:"*\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0448\u0435 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"},setValueAs:function(e){return e.slice(0,30)}}))),(null===D||void 0===D?void 0:D.name)&&(0,h.jsx)("div",{className:P,children:null===(e=D.name)||void 0===e?void 0:e.message})]}),(0,h.jsxs)("div",{className:N,children:[(0,h.jsx)("label",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"}),(0,h.jsx)(l.Qr,{name:"phone",control:W,rules:{required:"*\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435",minLength:{value:12,message:"*\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e "}},render:function(e){var s=e.field,n=s.onChange,r=s.value;return(0,h.jsx)(d(),{value:r,onChange:n,country:"ua",placeholder:"+380 (97) 123 45 67",specialLabel:""})}}),(null===D||void 0===D?void 0:D.phone)&&(0,h.jsx)("div",{className:P,children:null===(s=D.phone)||void 0===s?void 0:s.message})]}),(0,h.jsxs)("div",{className:N,children:[(0,h.jsx)("label",{children:"\u0410\u0434\u0440\u0435\u0441\u0430:"}),(0,h.jsx)("input",(0,r.Z)({placeholder:"\u041a\u0443\u0434\u0438 \u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f...?",value:ee||""},G("address",{required:"*\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435",minLength:{value:10,message:"*\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0448\u0435 10 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"},setValueAs:function(e){return e.slice(0,30)}}))),(null===D||void 0===D?void 0:D.address)&&(0,h.jsx)("div",{className:P,children:null===(n=D.address)||void 0===n?void 0:n.message})]})]}),(0,h.jsxs)("section",{className:w,children:[(0,h.jsx)("label",{children:"\u0411\u0430\u043d\u043a\u0456\u0432\u0441\u044c\u043a\u0430 \u043a\u0430\u0440\u0442\u043a\u0430:"}),(0,h.jsxs)("div",{className:k,children:[(0,h.jsx)("input",(0,r.Z)({value:re||"",autoComplete:"off",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u043a\u0438"},G("cardNumber",{required:"*\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435",pattern:{value:/^(\d{4} ){3}\d{4}$/i,message:"*\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440"},onChange:function(e){return H(e.nativeEvent.inputType)},setValueAs:function(e){return function(e,s){return(null===(e=e.slice(0,19)).match(/^[0-9 ]+$/)||null!==e.match(/[\s{2}]+$/))&&(e=""),"deleteContentBackward"===s||(null!==e.match(/^\d{4}$/)||null!==e.match(/^\d{4}\s\d{4}$/)||null!==e.match(/^\d{4}\s\d{4}\s\d{4}$/))&&(e+=" "),e}(e,O)}}))),(null===D||void 0===D?void 0:D.cardNumber)&&(0,h.jsx)("div",{className:Z,children:null===(c=D.cardNumber)||void 0===c?void 0:c.message}),(0,h.jsx)("input",(0,r.Z)({className:C,placeholder:"\u0442\u0435\u0440\u043c\u0456\u043d",autoComplete:"off",type:"text",value:ne||""},G("term",{pattern:{value:/^(0[1-9]|1[0-2])\/?([0-9]{4}|[0-9]{2})$/,message:"*\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0443 \u0434\u0430\u0442\u0443"},required:"*\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435",onChange:function(e){return H(e.nativeEvent.inputType)},setValueAs:function(e){return function(e,s){return e=e.slice(0,5),"deleteContentBackward"===s||(null===e.match(/^[0-9/]+$/)?e="":null!==e.match(/^\d{2}$/)&&(e+="/")),e}(e,O)}}))),(null===D||void 0===D?void 0:D.term)&&(0,h.jsx)("div",{className:$,children:null===(m=D.term)||void 0===m?void 0:m.message})]}),(0,h.jsxs)("div",{className:q,children:[(0,h.jsx)("p",{children:" "}),(0,h.jsx)("input",(0,r.Z)({placeholder:"cvv",type:"password",value:se||""},G("password",{required:"*\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435",setValueAs:function(e){return e.slice(0,3)}}))),(null===D||void 0===D?void 0:D.password)&&(0,h.jsx)("div",{className:V,children:null===(v=D.password)||void 0===v?void 0:v.message})]})]})]}),(0,h.jsx)(p,{process:R})]}),"error"===R&&(0,h.jsx)("p",{className:z,children:"\u041f\u0440\u0438 \u043e\u0431\u0440\u043e\u0431\u0446\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430! \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f \u0442\u0430 \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0449\u0435!"})]})}}}]);
//# sourceMappingURL=822.41655135.chunk.js.map